{"ast":null,"code":"import _objectSpread from\"/Users/Endicott/dev/Software/jotpad/jotpad/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"/Users/Endicott/dev/Software/jotpad/jotpad/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/Endicott/dev/Software/jotpad/jotpad/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/Endicott/dev/Software/jotpad/jotpad/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import{Link}from'react-router-dom';import{ReactComponent as ArrowLeft}from'../assets/arrow-left.svg';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var NotePage=function NotePage(_ref){var match=_ref.match,history=_ref.history;var noteId=match.params.id;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),note=_useState2[0],setNote=_useState2[1];useEffect(function(){getNote();},[noteId]);var getNote=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(noteId==='new')){_context.next=2;break;}return _context.abrupt(\"return\");case 2:_context.next=4;return fetch(\"/api/notes/\".concat(noteId,\"/\"));case 4:response=_context.sent;_context.next=7;return response.json();case 7:data=_context.sent;setNote(data);case 9:case\"end\":return _context.stop();}}},_callee);}));return function getNote(){return _ref2.apply(this,arguments);};}();var createNote=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:fetch(\"/api/notes/create/\",{method:\"POST\",headers:{'Content-Type':'application/json'},body:JSON.stringify(note)});case 1:case\"end\":return _context2.stop();}}},_callee2);}));return function createNote(){return _ref3.apply(this,arguments);};}();var upddateNote=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(){return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:fetch(\"/api/notes/\".concat(noteId,\"/update\"),{method:\"PUT\",headers:{'Content-Type':'application/json'},body:JSON.stringify(note)});case 1:case\"end\":return _context3.stop();}}},_callee3);}));return function upddateNote(){return _ref4.apply(this,arguments);};}();var deleteNote=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(){return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:fetch(\"/api/notes/\".concat(noteId,\"/delete\"),{method:\"DELETE\",'headers':{'Content-Type':'application/json'}});history.push('/');case 2:case\"end\":return _context4.stop();}}},_callee4);}));return function deleteNote(){return _ref5.apply(this,arguments);};}();var handleChange=function handleChange(value){setNote(function(note){return _objectSpread(_objectSpread({},note),{},{'body':value});});console.log('Handle Change:',note);};var handleSubmit=function handleSubmit(){console.log('NOTE:',note);if(noteId!=='new'&&note.body===''){console.log(\"DELETE METHOD TRIGGERED\");deleteNote();}else if(noteId!=='new'){upddateNote();}else if(noteId==='new'&&note.body!==null){createNote();}history.push('/');};return/*#__PURE__*/_jsxs(\"div\",{className:\"note\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"note-header\",children:[/*#__PURE__*/_jsx(\"h3\",{children:/*#__PURE__*/_jsx(ArrowLeft,{onClick:handleSubmit})}),noteId!=='new'?/*#__PURE__*/_jsx(\"button\",{onClick:deleteNote,children:\"Delete\"}):/*#__PURE__*/_jsx(\"button\",{onClick:handleSubmit,children:\"Done\"})]}),/*#__PURE__*/_jsx(\"textarea\",{onChange:function onChange(e){handleChange(e.target.value);},value:note===null||note===void 0?void 0:note.body})]});};export default NotePage;","map":{"version":3,"names":["React","useState","useEffect","Link","ReactComponent","ArrowLeft","NotePage","match","history","noteId","params","id","note","setNote","getNote","fetch","response","json","data","createNote","method","headers","body","JSON","stringify","upddateNote","deleteNote","push","handleChange","value","console","log","handleSubmit","e","target"],"sources":["/Users/Endicott/dev/Software/jotpad/jotpad/frontend/src/pages/NotePage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react'\nimport { Link } from 'react-router-dom';\nimport { ReactComponent as ArrowLeft } from '../assets/arrow-left.svg'\n\nconst NotePage = ({ match, history }) => {\n    \n    let noteId = match.params.id;\n    let [note, setNote] = useState(null);\n\n    useEffect(() => {\n        getNote()\n    }, [noteId])\n\n    let getNote = async () => {\n        if (noteId === 'new') return;\n        let response = await fetch(`/api/notes/${noteId}/`);\n        let data = await response.json();\n        setNote(data);\n    }\n\n    let createNote = async () => {\n      fetch(`/api/notes/create/`,{\n        method: \"POST\",\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(note)\n        });\n    }\n\n    let upddateNote = async () => {\n        fetch(`/api/notes/${noteId}/update`,{\n          method: \"PUT\",\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify(note)\n          })\n        }\n    \n    let deleteNote = async () => {\n      fetch(`/api/notes/${noteId}/delete`, {\n        method: \"DELETE\",\n        'headers': {\n          'Content-Type': 'application/json'\n        }\n      })\n      history.push('/')\n    }\n\n    let handleChange = (value) => {\n      setNote(note => ({...note, 'body':value}))\n      console.log('Handle Change:', note)\n    }\n\n    let handleSubmit = () => {\n      console.log('NOTE:', note)\n      if (noteId !== 'new' && note.body === '') {\n        console.log(\"DELETE METHOD TRIGGERED\")\n        deleteNote();\n      } else if (noteId !== 'new') {\n        upddateNote();\n      } else if (noteId === 'new' && note.body !== null) {\n        createNote();\n      }\n      history.push('/')\n    }\n\n    return (\n      <div className='note'>\n        <div className='note-header'>\n          <h3>\n            <ArrowLeft onClick={handleSubmit}/>\n          </h3>\n          {noteId !== 'new' ? (\n            <button onClick={deleteNote}>Delete</button>\n          ) : (\n            <button onClick={handleSubmit}>Done</button>\n          )}\n        </div>\n        <textarea onChange={(e) => { handleChange(e.target.value) }} value={note?.body}></textarea>\n      </div>\n  )\n}\n\nexport default NotePage\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}